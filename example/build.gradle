dependencies {
    compile project(':mobitopp')
    
    testCompile 'org.junit.jupiter:junit-jupiter-api:5.3.2',
                'org.junit.jupiter:junit-jupiter-params:5.3.2',
                'org.junit.jupiter:junit-jupiter-migrationsupport:5.3.2'
    
    testRuntime 'org.junit.jupiter:junit-jupiter-engine:5.3.2'
}

task runPopulationSynthesis(type: JavaExec) {
    args = ['data/leopoldshafen/population-synthesis.yaml']
    main = "edu.kit.ifv.mobitopp.populationsynthesis.PopulationSynthesisExample"
}

task runSimulation(type: JavaExec, dependsOn: compileJava) {
    args = ['data/leopoldshafen/simulation.yaml']
    main = "edu.kit.ifv.mobitopp.simulation.SimulationExample"
}

tasks.withType(JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    dependsOn check
    enableAssertions = "true"
    group = "application"
}

distributions {
    main {
        contents {
            into('dist') {
                from jar
                into('lib') {
                    from(project.configurations.runtime)
                }
            }
            into('bin') {
                from('bin.run') {
                    fileMode 0755
                    include 'run*.sh'
                }
            }
            into('config') {
                from('config') {
                    include '*.txt'
                    include 'TargetParameterRepetition2.csv'
                    include '*.yaml'
                }
            }
            into('') {
                from { "$buildDir/dist" }
            }
        }
    }
}